
{{ create_form.media.css }}
{% load static %}

<div class="card card-body card-form" style="width: 100%;">
    <div class="row mb-4">
        <div class="col-md-3">
            <button class="btn btn-primary btn-block" id="set_type_teacher">Teacher</button>
        </div>
        <div class="col-md-3">
            <button class="btn btn-secondary btn-block" id="set_type_location">Location</button>
        </div>
        <div class="col-md-3">
            <button class="btn btn-secondary btn-block" id="set_type_srt">SRT</button>
        </div>
        <div class="col-md-3">
            <button class="btn btn-secondary btn-block" id="set_type_library_srt">Library SRT</button>
        </div>
    </div>
    <form method="post">
        {% csrf_token %}
        <div>{{ create_form.pass_type }}</div>
        <div class="row">
            <div class="col-md-6">
                {# Destination Teacher Field #}
                <div id="destinationTeacher">
                    <div class="form-label" id="destinationTeacherLabel">Destination Teacher</div>
                    <div> {{ create_form.destinationTeacher }} </div>
                    {% for error in create_form.destinationTeacher.errors %}
                        <p style="color: red">{{ error }}</p>
                    {% endfor %}
                </div>

                {# Location #}
                <div id="location">
                    <div class="form-label" id="locationLabel">Location</div>
                    <div style="margin-bottom: 24px;"> {{ create_form.location }} </div>
                    {% for error in create_form.location.errors %}
                        <p style="color: red">{{ error }}</p>
                    {% endfor %}
                </div>

                {# Special Destination Field #}
                <div id="specialDestination">
                    <div class="form-label" id="specialDestinationLabel">Destination</div>
                    <div style="margin-bottom: 24px;"> {{ create_form.specialDestinationTeacher }} </div>
                    {% for error in create_form.specialDestinationTeacher.errors %}
                        <p style="color: red">{{ error }}</p>
                    {% endfor %}
                </div>
            </div>
            <div class="col-md-6">
                {# Origin Teacher Field #}
                <div id="originTeacher">
                    <div class="form-label" id="originTeacherLabel">Origin Teacher</div>
                    <div> {{ create_form.originTeacher }} </div>
                    {% for error in create_form.originTeacher.errors %}
                        <p style="color: red">{{ error }}</p>
                    {% endfor %}
                </div>

                {# Initiating Teacher Field #}
                <div id="initiatingTeacher">
                    <div class="form-label" id="initiatingTeacherLabel">Initiating Teacher</div>
                    <div> {{ create_form.initiatingTeacher }} </div>
                    {% for error in create_form.initiatingTeacher.errors %}
                        <p style="color: red">{{ error }}</p>
                    {% endfor %}
                </div>
            </div>
        </div>
        {# Students Field #}
        <div id="students">
            <div class="form-label">Student(s)</div>
            <div> {{ create_form.students }} </div>
            {% for error in create_form.students.errors %}
                <p style="color: red">{{ error }}</p>
            {% endfor %}
        </div>
        {# Start and end time #}
        <div class="row">
            <div class="col-md-4">
                <div class="form-label">Date</div>
                <div> {{ create_form.date }} </div>
                {% for error in create_form.date.errors %}
                    <p style="color: red">{{ error }}</p>
                {% endfor %}
            </div>
            <div class="col-md-4" id="endTime">
                <div class="form-label">End Time</div>
                <div> {{ create_form.start }} </div>
                {% for error in create_form.start.errors %}
                    <p style="color: red">{{ error }}</p>
                {% endfor %}
            </div>
            <div class="col-md-4" id="startTime">
                <div class="form-label">Start Time</div>
                <div> {{ create_form.end }} </div>
                {% for error in create_form.end.errors %}
                    <p style="color: red">{{ error }}</p>
                {% endfor %}
            </div>
            <div class="col-md-8">
                <div class="row">
                    {# SRT Session #}
                    <div class="col-md" id="session">
                        <div class="form-label" id="sessionLabel">Session</div>
                        <div> {{ create_form.session }} </div>
                        {% for error in create_form.session.errors %}
                            <p style="color: red">{{ error }}</p>
                        {% endfor %}
                    </div>
                    {# SRT Teacher Field #}
                    {# Interestingly enough, this is the same field as originTeacher, just in a different place with a different label. #}
                    <div class="col-md" id="SRTTeacher">
                        <div class="form-label" id="SRTTeacherLabel">SRT Teacher</div>
                        <div> {{ create_form.originTeacher }} </div>
                        {% for error in create_form.originTeacher.errors %}
                            <p style="color: red">{{ error }}</p>
                        {% endfor %}
                    </div>
                    </div>
            </div>
        </div>
        {# Reason #}
        <div id="reason">
            <div class="form-label">Description</div>
            <div> {{ create_form.reason }} </div>
            {% for error in create_form.reason.errors %}
                <p style="color: red">{{ error }}</p>
            {% endfor %}
        </div>
        {# Submit button #}
        <div class="form-group row">
            <div class="col-sm-2"></div>
            <div class="col-sm-8 mt-3">
                <button class="btn btn-info btn-block" type="submit">Create</button>
            </div>
        </div>
    </form>
</div>


{% block footer %}
    <script type="text/javascript" src="{% static 'admin/js/vendor/jquery/jquery.js' %}"></script>
{% endblock %}

{{ create_form.media.js }}

<script>
    $('#set_type_teacher').click(function(e) {
        $('#id_pass_type').val("1");
        $('#originTeacher').show();
        $('#destinationTeacher').show();
        $('#location').hide();
        $('#startTime').show();
        $('#endTime').show();
        $('#session').hide();
        $('#specialDestination').hide();
        $('#initiatingTeacher').hide();
        $('#SRTTeacher').hide();
        $(this).removeClass('btn-secondary').addClass('btn-primary');
        $('#set_type_location').removeClass('btn-primary').addClass('btn-secondary');
        $('#set_type_srt').removeClass('btn-primary').addClass('btn-secondary');
        $('#set_type_library_srt').removeClass('btn-primary').addClass('btn-secondary');
    });
    $('#set_type_location').click(function(e) {
        $('#id_pass_type').val("2");
        $('#originTeacher').show();
        $('#destinationTeacher').hide();
        $('#location').show();
        $('#startTime').show();
        $('#endTime').show();
        $('#session').hide();
        $('#specialDestination').hide();
        $('#initiatingTeacher').hide();
        $('#SRTTeacher').hide();
        $(this).removeClass('btn-secondary').addClass('btn-primary');
        $('#set_type_teacher').removeClass('btn-primary').addClass('btn-secondary');
        $('#set_type_srt').removeClass('btn-primary').addClass('btn-secondary');
        $('#set_type_library_srt').removeClass('btn-primary').addClass('btn-secondary');
    });
    $('#set_type_srt').click(function(e) {
        $('#id_pass_type').val("3");
        $('#originTeacher').show();
        $('#destinationTeacher').show();
        $('#location').hide();
        $('#startTime').hide();
        $('#endTime').hide();
        $('#session').show();
        $('#specialDestination').hide();
        $('#initiatingTeacher').hide();
        $('#SRTTeacher').hide();
        $(this).removeClass('btn-secondary').addClass('btn-primary');
        $('#set_type_teacher').removeClass('btn-primary').addClass('btn-secondary');
        $('#set_type_location').removeClass('btn-primary').addClass('btn-secondary');
        $('#set_type_library_srt').removeClass('btn-primary').addClass('btn-secondary');
    });
    $('#set_type_library_srt').click(function(e) {
        $('#id_pass_type').val("4");
        $('#originTeacher').hide();
        $('#destinationTeacher').hide();
        $('#location').hide();
        $('#startTime').hide();
        $('#endTime').hide();
        $('#session').show();
        $('#specialDestination').show();
        $('#initiatingTeacher').show();
        $('#SRTTeacher').show();
        $(this).removeClass('btn-secondary').addClass('btn-primary');
        $('#set_type_teacher').removeClass('btn-primary').addClass('btn-secondary');
        $('#set_type_location').removeClass('btn-primary').addClass('btn-secondary');
        $('#set_type_srt').removeClass('btn-primary').addClass('btn-secondary');
    });
    $(document).ready(function() {
        var d = new Date();
        {# (d.getMinutes()<10?'0':'') adds a leading zero if the minutes are less than ten #}
        $('#id_start').val(d.getHours()+":"+(d.getMinutes()<10?'0':'')+d.getMinutes());
        $('#id_end').val(d.getHours()+1+":"+(d.getMinutes()<10?'0':'')+d.getMinutes());
        {# Hide things that should be hidden initially #}
        $('#location').hide();
        $('#session').hide();
        $('#specialDestination').hide();
        $('#initiatingTeacher').hide();
        $('#SRTTeacher').hide();
    });
</script>