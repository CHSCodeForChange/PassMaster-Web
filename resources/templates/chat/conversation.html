<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
    
    <link rel="stylesheet" href="/static/css/student/home.css">
    <link rel="stylesheet" href="/static/css/chat/conversation.css">
 </head>
 
 <body>
 
     <div class="header-box">
        <h1 class="display-1">{{conversation.userTwo}}</h1>
     </div>
     
     <div class="messages-box">
         {% for message in conversation.messages.all %}
            <div class="message">
                <h1 class="sender">{{message.sender}}</h1>
                <h1 class="datetime">{{message.datetime}}</h1>
                <p class="text">{{message.message}}</p>
            </div>
         {% endfor %}
     </div>
     
    <div class="input-box">
         <input placeholder="Send a message">
    </div>
 </body>

<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
<script> 
    $(document).ready(function() {
        var getUrl = "/chat/api/messages/?format=json&conversation={{conversation.id}}";
        var getNewMessages = function() {
            $.ajax({
                url: getUrl,
                success: function(response) {
                    console.log(response);
                },
            });
        }
        
        var scrollAmount = $('.messages-box .anitem:last-child').position().top;
        console.log(scrollAmount);
        $('.messages-box').css({'scrollTop': scrollAmount});
                
//        setInterval(getNewMessages, 2000);
    });
</script>
 